{"1":{"_meta":{"title":"Load Product Image"},"class_type":"LoadImage","inputs":{"image":"comfy_shampoo.png"}},"12":{"_meta":{"title":"Prompt Template"},"class_type":"PrimitiveStringMultiline","inputs":{"value":"Task: Realistic Product Compositing with Material Preservation Goal: Insert the product from Input 2 into Input 1, ensuring placement is logical and lighting interacts accurately with the product's specific material properties.\n\nInput Image(s):\n\nInput 1 (Scene)\nInput 2 (Product): {product_description}\n\nManual Material Breakdown (Critical): To ensure correct light interaction, treat the product as having the following physical properties:\n\nPrimary Material: [e.g., Matte Plastic / Brushed Aluminum / Clear Glass]\n\nReflectivity: [e.g., Low (dull reflections) / High (mirror-like)]\n\nTexture: [e.g., Smooth / Grainy / Porous]\n\nReaction to Light: [e.g., \"Should absorb light with soft highlights, no sharp glares\"]\n\nSecondary Material (if any): [e.g., Gold Foil Label / Glossy Cap]\n\nReaction to Light: [e.g., \"Should catch sharp, bright specular highlights from the environment\"]\n\nProcess:\nScene Analysis: Identify the logical ground plane/surface in Input 1.\n\nPlacement: Scale Input 2 uniformly (maintain aspect ratio) and place it on the surface.\n\nMaterial-Based Relighting:\n\nDo not simply overlay the scene colors onto the product.\nInstead, map the environment light from Input 1 onto the contours of Input 2 based on the material definitions above.\n\nExample: If the material is Matte, only the edge lighting and general ambient tone should change; do not add sharp reflections.\n\nExample: If the material is Glossy, reflect the scene's details on the surface.\n\nShadows: Generate contact shadows that match the hardness/softness of shadows in the rest of the scene.\n\nTechnical Requirements:\nAlbedo Preservation: The intrinsic color of the product (e.g., \"Brand Red\") must not be washed out by the scene's lighting color.\n\nTexture Fidelity: Do not smooth out surface details (grain, bumps) during the blending process.\n\nScaling: No non-uniform stretching.\n\nOutput: A composite where the lighting confirms the materiality of the product (e.g., makes the plastic look like plastic, not metal)."}},"13":{"_meta":{"title":"Regex Replace"},"class_type":"RegexReplace","inputs":{"case_insensitive":true,"count":0,"dotall":false,"multiline":false,"regex_pattern":"{product_description}","replace":["14",0],"string":["12",0]}},"14":{"_meta":{"title":"Describe the Product"},"class_type":"PrimitiveStringMultiline","inputs":{"value":"A dispenser bottle filled with viscuous clear liquid, with a metallic top, \"C\" logo and a clear glass body"}},"15:15":{"_meta":{"title":"Batch Images"},"class_type":"BatchImagesNode","inputs":{"images.image0":["2",0],"images.image1":["15:6",0]}},"15:5":{"_meta":{"title":"Get Image Size"},"class_type":"GetImageSize","inputs":{"image":["2",0]}},"15:6":{"_meta":{"title":"ResizeAndPadImage"},"class_type":"ResizeAndPadImage","inputs":{"image":["1",0],"interpolation":"area","padding_color":"white","target_height":["15:5",1],"target_width":["15:5",0]}},"2":{"_meta":{"title":"Load Background Image"},"class_type":"LoadImage","inputs":{"image":"flower_sea.png"}},"22":{"_meta":{"title":"ByteDance Seedream 4.5"},"class_type":"ByteDanceSeedreamNode","inputs":{"fail_on_partial":true,"height":2048,"image":["15:15",0],"max_images":1,"model":"seedream-4-5-251128","prompt":["13",0],"seed":406946789,"sequential_image_generation":"disabled","size_preset":"2048x2048 (1:1)","watermark":false,"width":2048}},"23":{"_meta":{"title":"Save Image"},"class_type":"SaveImage","inputs":{"filename_prefix":"ComfyUI","images":["22",0]}}}